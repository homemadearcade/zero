{"version":3,"sources":["../../src/models/Game.js"],"names":["Schema","mongoose","gameSchema","objects","type","Object","required","default","metadata","title","hero","spawnX","spawnY","world","classes","brushes","colors","awsImages","user","Types","ObjectId","ref","timestamps","validateGame","game","schema","Joi","object","validate","allowUnknown","methods","toJSON","id","_id","toString","createdAt","updatedAt","Game","model"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAM;AAAEA,EAAAA;AAAF,IAAaC,iBAAnB;AAEA,MAAMC,UAAU,GAAG,IAAIF,MAAJ,CACjB;AACEG,EAAAA,OAAO,EAAE;AACPC,IAAAA,IAAI,EAAEC,MADC;AAEPC,IAAAA,QAAQ,EAAE,IAFH;AAGPC,IAAAA,OAAO,EAAE;AAHF,GADX;AAMEC,EAAAA,QAAQ,EAAE;AACRJ,IAAAA,IAAI,EAAEC,MADE;AAERC,IAAAA,QAAQ,EAAE,IAFF;AAGRC,IAAAA,OAAO,EAAE;AACPE,MAAAA,KAAK,EAAE;AADA;AAHD,GANZ;AAaEC,EAAAA,IAAI,EAAE;AACJN,IAAAA,IAAI,EAAEC,MADF;AAEJC,IAAAA,QAAQ,EAAE,IAFN;AAGJC,IAAAA,OAAO,EAAE;AACPI,MAAAA,MAAM,EAAE,CADD;AAEPC,MAAAA,MAAM,EAAE;AAFD;AAHL,GAbR;AAqBEC,EAAAA,KAAK,EAAE;AACLT,IAAAA,IAAI,EAAEC,MADD;AAELC,IAAAA,QAAQ,EAAE,IAFL;AAGLC,IAAAA,OAAO,EAAE;AAHJ,GArBT;AA0BEO,EAAAA,OAAO,EAAE;AACPV,IAAAA,IAAI,EAAEC,MADC;AAEPC,IAAAA,QAAQ,EAAE,IAFH;AAGPC,IAAAA,OAAO,EAAE;AAHF,GA1BX;AA+BEQ,EAAAA,OAAO,EAAE;AACPX,IAAAA,IAAI,EAAEC,MADC;AAEPC,IAAAA,QAAQ,EAAE,IAFH;AAGPC,IAAAA,OAAO,EAAE;AAHF,GA/BX;AAoCES,EAAAA,MAAM,EAAE;AACNZ,IAAAA,IAAI,EAAEC,MADA;AAENC,IAAAA,QAAQ,EAAE,IAFJ;AAGNC,IAAAA,OAAO,EAAE;AAHH,GApCV;AAyCEU,EAAAA,SAAS,EAAE;AACTb,IAAAA,IAAI,EAAEC,MADG;AAETC,IAAAA,QAAQ,EAAE,IAFD;AAGTC,IAAAA,OAAO,EAAE;AAHA,GAzCb;AA8CEW,EAAAA,IAAI,EAAE;AAAEd,IAAAA,IAAI,EAAEH,kBAASD,MAAT,CAAgBmB,KAAhB,CAAsBC,QAA9B;AAAwCC,IAAAA,GAAG,EAAE;AAA7C;AA9CR,CADiB,EAiDjB;AAAEC,EAAAA,UAAU,EAAE;AAAd,CAjDiB,CAAnB;;AAoDO,MAAMC,YAAY,GAAIC,IAAD,IAAU;AACpC;AACA,QAAMC,MAAM,GAAG;AACbf,IAAAA,IAAI,EAAEgB,aAAIC,MAAJ,CAAW,CACf;AACA;AAFe,KAAX,CADO;AAKbd,IAAAA,KAAK,EAAEa,aAAIC,MAAJ,CAAW,EAAX,CALM;AAQbnB,IAAAA,QAAQ,EAAEkB,aAAIC,MAAJ,CAAW,EAAX,CARG;AAWbxB,IAAAA,OAAO,EAAEuB,aAAIC,MAAJ,EAXI;AAYbb,IAAAA,OAAO,EAAEY,aAAIC,MAAJ,EAZI;AAabZ,IAAAA,OAAO,EAAEW,aAAIC,MAAJ,EAbI;AAcbX,IAAAA,MAAM,EAAEU,aAAIC,MAAJ,EAdK;AAebV,IAAAA,SAAS,EAAES,aAAIC,MAAJ;AAfE,GAAf;AAiBA,SAAOD,aAAIE,QAAJ,CAAaJ,IAAb,EAAmBC,MAAnB,EAA2B;AAAEI,IAAAA,YAAY,EAAE;AAAhB,GAA3B,CAAP;AACD,CApBM;;;;AAsBP3B,UAAU,CAAC4B,OAAX,CAAmBC,MAAnB,GAA4B,YAAY;AACtC,SAAO;AACLC,IAAAA,EAAE,EAAE,KAAKC,GAAL,CAASC,QAAT,EADC;AAEL1B,IAAAA,QAAQ,EAAE,KAAKA,QAFV;AAGLL,IAAAA,OAAO,EAAE,KAAKA,OAHT;AAILO,IAAAA,IAAI,EAAE,KAAKA,IAJN;AAKLI,IAAAA,OAAO,EAAE,KAAKA,OALT;AAMLC,IAAAA,OAAO,EAAE,KAAKA,OANT;AAOLC,IAAAA,MAAM,EAAE,KAAKA,MAPR;AAQLH,IAAAA,KAAK,EAAE,KAAKA,KARP;AASLI,IAAAA,SAAS,EAAE,KAAKA,SATX;AAULC,IAAAA,IAAI,EAAE,KAAKA,IAAL,CAAUa,MAAV,EAVD;AAWLI,IAAAA,SAAS,EAAE,KAAKA,SAXX;AAYLC,IAAAA,SAAS,EAAE,KAAKA;AAZX,GAAP;AAcD,CAfD;;AAiBA,MAAMC,IAAI,GAAGpC,kBAASqC,KAAT,CAAe,MAAf,EAAuBpC,UAAvB,CAAb;;eAEemC,I","sourcesContent":["import mongoose from 'mongoose';\nimport Joi from 'joi';\n\nconst { Schema } = mongoose;\n\nconst gameSchema = new Schema(\n  {\n    objects: {\n      type: Object,\n      required: true,\n      default: {}\n    },\n    metadata: {\n      type: Object,\n      required: true,\n      default: {\n        title: 'Unknown',\n      }\n    },\n    hero: {\n      type: Object,\n      required: true,\n      default: {\n        spawnX: 0,\n        spawnY: 0\n      }\n    },\n    world: {\n      type: Object,\n      required: true,\n      default: {}\n    },\n    classes: {\n      type: Object,\n      required: true,\n      default: {}\n    },\n    brushes: {\n      type: Object,\n      required: true,\n      default: {}\n    },\n    colors: {\n      type: Object,\n      required: true,\n      default: {}\n    },\n    awsImages: {\n      type: Object,\n      required: true,\n      default: {}\n    },\n    user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },\n  },\n  { timestamps: true },\n);\n\nexport const validateGame = (game) => {\n  //Joi.object().pattern(/^/, Joi.date().iso())\n  const schema = {\n    hero: Joi.object({\n      // spawnX: Joi.number().required(),\n      // spawnY: Joi.number().required()\n    }),\n    world: Joi.object({\n\n    }),\n    metadata: Joi.object({\n\n    }),\n    objects: Joi.object(),\n    classes: Joi.object(),\n    brushes: Joi.object(),\n    colors: Joi.object(),\n    awsImages: Joi.object(),\n  };\n  return Joi.validate(game, schema, { allowUnknown: true });\n};\n\ngameSchema.methods.toJSON = function () {\n  return {\n    id: this._id.toString(),\n    metadata: this.metadata,\n    objects: this.objects,\n    hero: this.hero,\n    classes: this.classes,\n    brushes: this.brushes,\n    colors: this.colors,\n    world: this.world,\n    awsImages: this.awsImages,\n    user: this.user.toJSON(),\n    createdAt: this.createdAt,\n    updatedAt: this.updatedAt,\n  };\n};\n\nconst Game = mongoose.model('Game', gameSchema);\n\nexport default Game;\n"],"file":"Game.js"}